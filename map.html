<!DOCTYPE html>
<html lang="en">

<head>
    <title>PocketPoly</title>
    <script src="https://code.jquery.com/jquery-1.12.3.min.js" integrity="sha256-aaODHAgvwQW1bFOGXMeX+pC4PZIPsvn2h1sArYOhgXQ=" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/a30ad6b8d2.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="script.js"></script>

    <script src="https://api.mapbox.com/mapbox-gl-js/v1.6.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.6.1/mapbox-gl.css" rel="stylesheet" />

    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css" type="text/css"/>
</head>
<body>

    <style>
        .mapboxgl-canvas{
            width: 70vw !important;
        }

        .mapboxgl-ctrl-top-right{
            width: 24vw !important;
        }

        .mapboxgl-ctrl-top-right .mapboxgl-ctrl-directions{
            min-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            padding: 10px 10px !important;
        }

        </style>
         
    <div class="leftNav">
        <div class="hamburger"><i class="fas fa-bars"></i></div>
    <nav class="nav">
        <a href="index.html" class="navSym navSym1"><i class="fas fa-home navSpace"></i></a>
        <a href="events.html" class="navSym navSym2"><i class="far fa-calendar navSpace"></i></a>
        <a href="#" class="navSym navSym3"><i class="fas fa-th-list navSpace"></i></a>
        <a href="#" class="navSym navSym4"><i class="fas fa-route navSpace"></i></a>
        <a href="#" class="navSym navSym5"><i class="fas fa-cog navSpace"></i></a>
        <a href="#" class="navSym navSym6"><i class="fas fa-user-graduate navSpace"></i></a>
    </nav>
    
    
    
    <img src="images/eduspace-logo.png" class="eduSpaceLogo">
    </div>

    <div id='map' style='width: 100%; height: 100vh;'></div>

    <script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoib3NzaGl5YSIsImEiOiJjazVvMTlidHQwaGJlM2ZuczRuZzM1dGthIn0.UZrlYGDGjQLfsT-6wyayBg';
    var bounds = [
        [103.3420359, 1.1804753], // Southwest coordinates
        [104.2620359, 1.5004753] // Northeast coordinates
    ];
    var map = new mapboxgl.Map({
    minZoom: 11,
    maxZoom: 18,
    maxBounds: bounds,
    center: [103.8198, 1.3521],
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11'
    });



    var navCtrl = new mapboxgl.NavigationControl();
    map.addControl(navCtrl, 'top-left');
    map.addControl(new mapboxgl.GeolocateControl({
    positionOptions: {
        enableHighAccuracy: true
    },
    trackUserLocation: true,
}),
    'top-left'
);
    map.addControl(new MapboxDirections({
    accessToken: mapboxgl.accessToken,
// limit results to Australia
    countries: 'sg',
// further limit results to the geographic bounds representing the region of
// New South Wales
    bbox: [103.6920359, 1.1304753, 104.0120359, 1.4504753],
    mapboxgl: mapboxgl,
}),
    'top-right'
);



    map.on('load', function() {
// Insert the layer beneath any symbol layer.
var layers = map.getStyle().layers;
var labelLayerId;
for (var i = 0; i < layers.length; i++) {
if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
labelLayerId = layers[i].id;
break;
}
}
map.addLayer(
{
'id': '3D',
'source': 'composite',
'source-layer': 'building',
'filter': ['==', 'extrude', 'true'],
'type': 'fill-extrusion',
'minzoom': 15,
'layout': {
            'visibility': 'visible'
        },
'paint': {
'fill-extrusion-color': '#aaa',
// use an 'interpolate' expression to add a smooth transition effect to the
// buildings as the user zooms in
'fill-extrusion-height': [
'interpolate',
['linear'],
['zoom'],
15,
0,
15.05,
['get', 'height']
],
'fill-extrusion-base': [
'interpolate',
['linear'],
['zoom'],
15,
0,
15.05,
['get', 'min_height']
],
'fill-extrusion-opacity': 0.6
}
},
labelLayerId
);

map.loadImage(
'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
function(error, image) {
if (error) throw error;
map.addImage('custom-marker', image);
// Add a GeoJSON source with 2 points
map.addSource('points', {
'type': 'geojson',
'data': {
'type': 'FeatureCollection',
'features': [
{
// feature for SP
'type': 'Feature',
'geometry': {
'type': 'Point',
'coordinates': [
103.77865,1.31001
]
},
'properties': {
'title': 'Singapore Polytechnic'
}
},
{
// feature for NYP
'type': 'Feature',
'geometry': {
'type': 'Point',
'coordinates': [
103.84760,1.37984
]
},
'properties': {
'title': 'Nanyang Polytechnic'
}
},
{
// feature for TP
'type': 'Feature',
'geometry': {
'type': 'Point',
'coordinates': [
103.93363,1.34502
]
},
'properties': {
'title': 'Temasek Polytechnic'
}
},
{
// feature for NP
'type': 'Feature',
'geometry': {
'type': 'Point',
'coordinates': [103.77504,1.33197]
},
'properties': {
'title': 'Ngee Ann Polytechnic'
}
},
{
// feature for RP
'type': 'Feature',
'geometry': {
'type': 'Point',
'coordinates': [
103.78535,1.44296
]
},
'properties': {
'title': 'Republic Polytechnic'
}
}
]
}
});
 
// Add a symbol layer
map.addLayer({
'id': 'points',
'type': 'symbol',
'source': 'points',
'layout': {
'icon-image': 'custom-marker',
// get the title name from the source's "title" property
'text-field': ['get', 'title'],
'text-font': [
'Open Sans Semibold',
'Arial Unicode MS Bold'
],
'text-offset': [0, 1.25],
'text-anchor': 'top'
}
});

});
});
    </script>

</body>
</html>